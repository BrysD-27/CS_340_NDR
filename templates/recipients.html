{% extends "index.html" %}

{% block content %}
<h2>Recipients</h2>
<h3 class="mb-0">
  <button class="accordion-toggle" onclick="toggleAccordion('addRecipientAccordion')" type="button">
    Add Recipient
    <span id="accordion-arrow">&#9660;</span>
  </button>
</h3>
<div id="addRecipientAccordion" class="accordion-content">
  <div class="form-card">
    <form action="/add-recipient" method="POST" class="form">
      <div class="form-row">
        <input name="organizationName" placeholder="Organization Name" type="text" required>
        <input name="contactName" placeholder="Contact Name" type="text" required>
      </div>
      <div class="form-row">
        <input name="streetAddress" placeholder="Street Address" type="text" required>
        <input name="city" placeholder="City" type="text" required>
      </div>
      <div class="form-row">
        <input name="state" placeholder="State" type="text" maxlength="2" style="max-width:70px;" required>
        <input name="zip" placeholder="ZIP" type="text" maxlength="10" style="max-width:100px;" required>
      </div>
      <div class="form-row">
        <input name="email" placeholder="Email" type="email">
        <input name="phone" placeholder="Phone" type="tel">
      </div>
      <div class="form-row">
        <textarea name="description" placeholder="Description" rows="2"></textarea>
      </div>
      <button type="submit" class="btn">Add</button>
    </form>
  </div>
</div>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Address</th>
            <th>Contact</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Description</th>
            <th colspan="2">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for r in recipients %}
        <tr>
            <td>{{ r.recipientID }}</td>
            <td>{{ r.organizationName }}</td>
            <td>{{ r.streetAddress }}, {{ r.city }}, {{ r.state }} {{ r.zip }}</td>
            <td>{{ r.contactName }}</td>
            <td>{{ r.email }}</td>
            <td class="phone">{{ r.phone }}</td>
            <td class="desc-cell">{{ r.description }}</td>
            <td>
                <a href="{{ url_for('edit_recipient', id=r.recipientID) }}" class="btn">Edit</a>
            </td>
            <td>
                <form action="/delete-recipient/{{ r.recipientID }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-outline">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}